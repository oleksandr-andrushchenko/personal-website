{% extends "layout.html" %}

{% block content %}
    {% set ns = namespace(_blocks=[]) %}
    {% for block_id in blocks | default([]) %}
        {% set ns._blocks = ns._blocks + [__ctx__[block_id]] %}
    {% endfor %}

    {% for block in ns._blocks | selectattr('page_active') | sort(attribute='order') %}
        {% include block.id ~ ".html" with context %}
    {% endfor %}
{% endblock %}
